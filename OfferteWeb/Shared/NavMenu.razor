<div class="top-row ps-3 navbar navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">OfferteWeb</a>
    </div>
</div>

<MudNavMenu>
    <MudNavLink OnClick="(() => MethodForNavigationCheck.Invoke(home))" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">Home</MudNavLink>
    @if (IsAdmin())
    {
        <MudNavGroup Title="Admin" Expanded="true">
            <MudNavLink OnClick="(() => MethodForNavigationCheck.Invoke(category))" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Category">Categorie</MudNavLink>
            <MudNavLink OnClick="(() => MethodForNavigationCheck.Invoke(user))" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Person">Utenti</MudNavLink>
        </MudNavGroup>
    }
    <MudNavGroup Title="Articoli" Expanded="true">
        <MudNavLink OnClick="(() => MethodForNavigationCheck.Invoke(postNew))" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Article">Nuovo</MudNavLink>
        <MudNavLink OnClick="(() => MethodForNavigationCheck.Invoke(post))" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.List">Elenco</MudNavLink>
    </MudNavGroup>
    <MudNavGroup Title="Template Email" Expanded="true">
        <MudNavLink OnClick="(() => MethodForNavigationCheck.Invoke(emailList))" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.PersonPin">Elenco template Email</MudNavLink>
    </MudNavGroup>
</MudNavMenu>


@code {
    [Parameter]
    public string Role { get; set; }
    [Parameter] public Action<string> MethodForNavigationCheck { get; set; }
    
    private bool collapseNavMenu = true;

    // private string? NavMenuCssClass => collapseNavMenu ? "collapse" : null;
    string home = "/";
    string category = "/category";
    string user = "/user";
    string tenant = "/tenant";
    string postNew = "/post/new";
    string post = "/post";
    string grouping = "/grouping";
    string emailList = "/emailTemplate";

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }
    
    public bool IsAdmin()
    {
        return Role == OfferteWeb.Models.Role.ADMIN;
    }

}
